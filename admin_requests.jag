<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0110)https://localhost:9443/carbon/sequences/list_sequences.jsp?region=region1&item=sequences_menu&loginStatus=true -->
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Admin:Home</title>
        <link href="css/global.css" rel="stylesheet" type="text/css" media="all">
        <link href="css/main.css" rel="stylesheet" type="text/css" media="all">
        <link href="css/jqueryui-themeroller.css" rel="stylesheet" type="text/css" media="all">
        <link href="css/dialog.css" rel="stylesheet" type="text/css" media="all">
        <link href="css/adminRequestStyle.css" rel="stylesheet" type="text/css" media="all">
        <link rel="stylesheet" href="css/carbonFormStyles.css">
        <!--[if gte IE 8]>
        <link href="../dialog/css/dialog-ie8.css" rel="stylesheet" type="text/css" media="all"/>
        <![endif]-->
        <!--[if gte IE 7]>
        <link href="../dialog/css/dialog-ie8.css" rel="stylesheet" type="text/css" media="all"/>
        <![endif]-->
        <link rel="icon" href="https://10.217.234.165:9443/carbon/admin/images/favicon.ico" type="image/x-icon">
        <link rel="shortcut icon" href="https://10.217.234.165:9443/carbon/admin/images/favicon.ico" type="image/x-icon">
        <script type="text/javascript" src="js/jquery-1.5.2.min.js"></script>
        <script type="text/javascript" src="js/jquery.form.js"></script>
        <script type="text/javascript" src="js/jqueryui/jquery-ui.min.js"></script>
        <script type="text/javascript" src="js/jquery.validate.js"></script>
        <script type="text/javascript" src="js/jquery.cookie.js"></script>
        <script type="text/javascript" src="js/jquery.ui.core.min.js"></script>
        <script type="text/javascript" src="js/jquery.ui.widget.min.js"></script>
        <script type="text/javascript" src="js/jquery.ui.tabs.min.js"></script>
        <script type="text/javascript" src="js/main.js"></script>
        <script type="text/javascript" src="js/WSRequest.js"></script>
        <script type="text/javascript" src="js/cookies.js"></script>
        <script type="text/javascript" src="js/customControls.js"></script>
        <!-- This script handles the tabbed pane functionality -->
        <script type="text/javascript">
            jQuery(document).ready(function(){
                loadRequests();
                prepareList();
            
            });


            function prepareList() {
                            $('#expList').find('li:has(ul)').unbind('click').click(function(event) {
                                if(this == event.target) {
                                    $(this).toggleClass('expanded');
                                    $(this).children('ul').toggle('medium');
                                }
                                return false;
                            }).addClass('collapsed').removeClass('expanded').children('ul').hide();
            
                            //Hack to add links inside the cv
                            $('#expList a').unbind('click').click(function() {
                                window.open($(this).attr('href'));
                                return false;
                            });
                            //Create the button functionality
                            $('#expandList').unbind('click').click(function() {
                                $('.collapsed').addClass('expanded');
                                $('.collapsed').children().show('medium');
                            })
                            $('#collapseList').unbind('click').click(function() {
                                $('.collapsed').removeClass('expanded');
                                $('.collapsed').children().hide('medium');
                            })
                        }



            function acceptRejectBtnClick(requestId,action){
                if(action=="0"){
                    alert(requestId+"--reject");
                    // $.post("admin_devices_updates.jag",{operation:"acceptRejcet",value:action,issue_id:requestId},function(data,status){

                    // });
                }
                else if(action=="1"){
                    alert(requestId+"--Accept");

                }
                $.post("admin_devices_updates.jag",{operation:"acceptRejcetRequest",value:action,req_id:requestId},function(data,status){
                        alert("jhjfhsj");
                    });
                
            }


            
            function loadRequests(){
                $.post("admin_requests_data_get.jag",{operation:"getUnresolved"},function(data,status){
            
                    alert(data);
            
                    var objArray=JSON.parse(data);
            
                            var unresolvedTablearea = document.getElementById('unresolvedDiv');
                            var pendingTablearea = document.getElementById('pendingDiv');
                            var rejectedTablearea = document.getElementById('rejectedDiv');

                            unresolvedTablearea.setAttribute("class","datagrid");
                            pendingTablearea.setAttribute("class","datagrid");
                            rejectedTablearea.setAttribute("class","datagrid");
            
                            for(var i=0;i<objArray.length;i++){

                                var resolvedStatus;
                                var cntr=0;
            
                                var newTable=document.createElement('table');
                                newTable.style.width='600px';
                                newTable.style.margin='0px 0px 15px 50px';
            
                                var thead=document.createElement('thead');
                                var htr=document.createElement('tr');
                                var th=document.createElement('th');
                                var tbody=document.createElement('tbody');
                                th.setAttribute('colspan','2');
                                th.style.height='15px';
                                htr.appendChild(th);
                                thead.appendChild(htr);
                                newTable.appendChild(thead);
            
                                var object=objArray[i];
            
                                for(var property in object){
            
                                    var newRow=document.createElement('tr');
            
                                    if(cntr%2==0){
                                        newRow.setAttribute("class","alt");
                                    }
            
                                    if(property=='request_id'){
                                        th.appendChild(document.createTextNode("Request ID: "+object[property]));

                                        var acceptBttn=document.createElement('input');
                                        var rejectBttn=document.createElement('input');
                                        acceptBttn.setAttribute("type","button");
                                        acceptBttn.setAttribute("id",object[property]);
                                        acceptBttn.setAttribute("value","Accept");
                                        acceptBttn.setAttribute("class","siteButton");
                                        acceptBttn.style.marginLeft="25px";
                    
                                        rejectBttn.setAttribute("value","Reject");
                                        rejectBttn.setAttribute("type","button");
                                        rejectBttn.setAttribute("id",object[property]);
                                        rejectBttn.setAttribute("class","siteButton");
                                        rejectBttn.style.marginLeft="25px";

                                        acceptBttn.setAttribute("onClick","acceptRejectBtnClick("+object[property]+",1)");
                                        rejectBttn.setAttribute("onClick","acceptRejectBtnClick("+object[property]+",0)");
                                    }

                                    else if(property=="resolved"){
                                        resolvedStatus=object[property];
                                    }
            
                                    else{
            
                                        var td1=document.createElement('td');
                                        var td2=document.createElement('td');
            
                                        td1.appendChild(document.createTextNode(property));
                                        td2.appendChild(document.createTextNode(object[property]));
            
                                        newRow.appendChild(td1);
                                        newRow.appendChild(td2);
            
                                        tbody.appendChild(newRow);
            
                                    }
                                    cntr++;
            
                                }



                                var buttonRow=document.createElement('tr');
                                var buttonTd=document.createElement('td');

                                var btnDiv=document.createElement('div');
                                btnDiv.style.marginLeft="25px";
            
                                // var buttonRow=document.createElement('tr');
                                // var buttonTd=document.createElement('td');
                                // var acceptBttn=document.createElement('input');
                                // var rejectBttn=document.createElement('input');
                                // acceptBttn.setAttribute("type","button");
                                // acceptBttn.setAttribute("value","Accept");
                                // acceptBttn.setAttribute("class","siteButton");
                                // acceptBttn.style.marginLeft="25px";
            
                                // rejectBttn.setAttribute("value","Reject");
                                // rejectBttn.setAttribute("type","button");
                                // rejectBttn.setAttribute("class","siteButton");
                                // rejectBttn.style.marginLeft="25px";

                                switch (resolvedStatus){
                                    case "0":{
                                        // buttonTd.appendChild(acceptBttn);
                                        // buttonTd.appendChild(rejectBttn);
                                        // buttonRow.appendChild(buttonTd);
                    
                                        // tbody.appendChild(buttonRow);
                                        btnDiv.appendChild(acceptBttn);
                                        btnDiv.appendChild(rejectBttn);
                    
                                        newTable.appendChild(tbody);
                                        unresolvedTablearea.appendChild(newTable);
                                        unresolvedTablearea.appendChild(btnDiv);
                                        break;
                                    }
                                    case "1":{
                                        newTable.appendChild(tbody);
                                        pendingTablearea.appendChild(newTable);
                                        break;
                                    }
                                    case "3":{
                                        // buttonTd.appendChild(acceptBttn);
                                        // buttonTd.appendChild(rejectBttn);
                                        // buttonRow.appendChild(buttonTd);
                    
                                        // tbody.appendChild(buttonRow);

                                        btnDiv.appendChild(acceptBttn);
                                        btnDiv.appendChild(rejectBttn);
                    
                                        newTable.appendChild(tbody);
                                        rejectedTablearea.appendChild(newTable);
                                        rejectedTablearea.appendChild(btnDiv);
                                        break;
                                    }
                                }
                            }
            
                });
            }
            
        </script>
    </head>
    <body>
        <noscript>
            &lt;div class="something-wrong"&gt;
            &lt;div class="title"&gt;JavaScript is disabled on your browser&lt;/div&gt;
            &lt;div class="content"&gt;Please enable JavaScript or upgrade to a JavaScript-capable browser to use WSO2 Products.&lt;/div&gt;
            &lt;/div&gt;
        </noscript>
        <div id="dcontainer"></div>
        <script type="text/javascript" src="./page2_files/dialog.js"></script>
        <!-- JS imports for collapsible menu -->
        <script src="./page2_files/yahoo-dom-event.js" type="text/javascript"></script>
        <script src="./page2_files/animation-min.js" type="text/javascript"></script>
        <script src="./page2_files/template.js" type="text/javascript"></script>
        <script src="./page2_files/yahoo-min.js" type="text/javascript"></script>
        <script src="./page2_files/selector-min.js" type="text/javascript"></script>
        <table id="main-table" border="0" cellspacing="0">
            <tbody>
                <tr>
                    <td id="header" colspan="3">
                        <div id="header-div">
                            <div class="right-logo">Management Console</div>
                            <div class="left-logo">
                            </div>
                            <div class="middle-ad">
                            </div>
                            <div class="header-links">
                                <div class="right-links">
                                    <ul>
                                        <li class="middle">
                                            <label id="logged-user">
                                            <strong>Signed-in as:</strong>&nbsp;admin@carbon.super
                                            </label>
                                        </li>
                                        <li class="middle">|</li>
                                        <li class="right">
                                            <a href="https://localhost:9443/carbon/admin/logout_action.jsp">Sign-out</a>
                                        </li>
                                        <li class="middle">|</li>
                                        <li class="middle">
                                            <a target="_blank" href="http://docs.wso2.org/wiki/display/AS521/WSO2+Application+Server+Documentation">Docs</a>
                                        </li>
                                        <li class="middle">|</li>
                                        <li class="left">
                                            <a target="_blank" href="https://localhost:9443/carbon/docs/about.html">About</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td id="menu-panel" valign="top" height="400px">
                        <div id='mainMenu'>
                            <ul>
                                <li><a href='admin_home.jag'><span>Home</span></a></li>
                                <li><a href='admin_devices.jag'><span>Devices</span></a></li>
                                <li><a href='admin_requests.jag'><span>Requests</span></a></li>
                                <li class='last'><a href='#'><span>Report Generation</span></a></li>
                            </ul>
                        </div>
                    </td>
                    <td id="middle-content">
                        <table id="content-table" border="0" cellspacing="0">
                            <tbody>
                                <tr>
                                    <td id="page-header-links">
                                        <table class="page-header-links-table" cellspacing="0">
                                            <tbody>
                                                <tr>
                                                    <td class="breadcrumbs">
                                                        <table class="breadcrumb-table" cellspacing="0">
                                                            <tbody>
                                                                <tr>
                                                                    <td>
                                                                        <div id="breadcrumb-div"></div>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                    <td class="page-header-help"><a href="https://localhost:9443/carbon/sequences/docs/userguide.html" target="_blank">Help</a></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                                <tr>
                                    <td id="body">
                                        <img src="./page2_files/1px.gif" width="735px" height="1px">
                                    </td>
                                </tr>
                                <!--This is edited for devices grid implementation -->
                                <tr>



                                <td>   
                                    <div id="adminRequestsContainer" class="main_container"> 
                                        <div id="listContainer">
                                            <ul id="expList">

                                                <li>
                                                    <h2><span style="color: #00346e">Unresolved Requests</span></h2>
                                                    <ul></br>
                                                        <div id="unresolvedDiv">
                                                        </div>
                                                    </ul>
                                                </li></br><hr  style="margin-bottom: 25px"/></br>

                                                <li>
                                                    <h2><span style="color: #00346e">Pending for User Response</span></h2>
                                                    <ul></br>
                                                        <div id="pendingDiv">
                                                        </div>
                                                    </ul>
                                                </li></br><hr  style="margin-bottom: 25px"/></br>
                                                <li>
                                                    <h2><span style="color: #00346e">Rejected by User</span></h2>
                                                    <ul></br>
                                                        <div id="rejectedDiv">
                                                        </div>
                                                    </ul>
                                                </li></br>
                                            
                                          </ul>
                                        </div>
                                    </div>
                                </td>






                                    <!-- <td>
                                        <h2 style="color: #00346e">Requests</h2>
                                        <br/>
                                        <div id="requestsDiv">
                                        </div>
                                    </td> -->
                                </tr>
                                <!-- End of devices grid generation -->
                            </tbody>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td id="footer" colspan="3">
                        <div id="footer-div">
                            <div class="footer-content">
                                <div class="copyright">
                                    © 2005 - 2013 WSO2 Inc. All Rights Reserved.
                                </div>
                                <!--div class="poweredby">
                                    </div-->
                            </div>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <script type="text/javascript">
            if (Function('/*@cc_on return document.documentMode===10@*/')()){
                document.documentElement.className+=' ie10';
            }
        </script>
    </body>
</html>