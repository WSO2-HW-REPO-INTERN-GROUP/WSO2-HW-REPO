<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0110)https://localhost:9443/carbon/sequences/list_sequences.jsp?region=region1&item=sequences_menu&loginStatus=true -->
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>User:DeviceDetails</title>
        <link href="css/global.css" rel="stylesheet" type="text/css" media="all">
        <link href="css/main.css" rel="stylesheet" type="text/css" media="all">
        <!--<link href="css/jqueryui-themeroller.css" rel="stylesheet" type="text/css" media="all">-->
        <link href="css/dialog.css" rel="stylesheet" type="text/css" media="all">
        <link href="css/adminDeviceDetailsStyle.css" rel="stylesheet" type="text/css" media="all">
        <link rel="stylesheet" href="css/carbonFormStyles.css">
        <!--[if gte IE 8]>
        <link href="../dialog/css/dialog-ie8.css" rel="stylesheet" type="text/css" media="all"/>
        <![endif]-->
        <!--[if gte IE 7]>
        <link href="../dialog/css/dialog-ie8.css" rel="stylesheet" type="text/css" media="all"/>
        <![endif]-->
        <link rel="stylesheet" href="css/jquery-ui.css"/>
        <script type="text/javascript" src="js/jquery-1.5.2.min.js"></script>
        <script type="text/javascript" src="js/jquery.form.js"></script>
        <script type="text/javascript" src="js/jqueryui/jquery-ui.min.js"></script>
        <script type="text/javascript" src="js/jquery.validate.js"></script>
        <script type="text/javascript" src="js/jquery.cookie.js"></script>
        <script type="text/javascript" src="js/jquery.ui.core.min.js"></script>
        <script type="text/javascript" src="js/jquery.ui.widget.min.js"></script>
        <script type="text/javascript" src="js/jquery.ui.tabs.min.js"></script>
        <script type="text/javascript" src="js/main.js"></script>
        <script type="text/javascript" src="js/WSRequest.js"></script>
        <script type="text/javascript" src="js/cookies.js"></script>
        <script type="text/javascript" src="js/jquery.ui.datepicker.js"></script>
        <script type="text/javascript" src="js/customControls.js"></script>
        <script type="text/javascript" src="js/jquery-1.9.1.js"></script>
        <script type="text/javascript" src="js/jquery-ui.js"></script>

        <!--myscripts-->
      <script src="appJS/Hwdrepo.js"></script>
      <script type="text/javascript" src="appJS/util.js"></script>

        <!-- This script handles the tabbed pane functionality -->
        <script type="text/javascript">

        var urlData=window.location.search.substring(1);
        var deviceID=(urlData.split("="))[1];

            jQuery(document).ready(function() {
            
                prepareList();
                readURL();
                getAccessories();

                


                // set date picker in report issue form

                $( "#datepicker" ).datepicker({ dateFormat: "yy-mm-dd" ,gotoCurrent: true});
                $( "#componentDetailsArea" ).html(Hwdrepo.getHardwareComponentDescription(deviceID));
            
                $("#reportIssueDialog").dialog({

                    autoOpen:false,
                    height: 600,
                    width: 700,
                    modal: true,
                    buttons:{
                        'Confirm': function() {

                            var type=document.getElementById('issueTypeSelect');
                            var category=document.getElementById('issueCatSelect');
                            var description=document.getElementById('issueDescription');
                            var errSpan=document.getElementById('addHdwErr');
                            var date = $( "#datepicker").val();
                            alert(date);
                            


                            if(type.options[type.selectedIndex].value=="0"||date==null||description.value==""){
                                errSpan.classList.remove(errSpan.className);
                                errSpan.classList.add("error");
                                errSpan.textContent="Please Check for Correct device type selection or empty description";
                            }
                            else{

                                var issueData={

                                    "sts":type.options[type.selectedIndex].text,
                                    "dev_id":deviceID,
                                    "desc":description.value,
                                    "date": date

                                };

                                Hwdrepo.addIssue(issueData);



                            }



            
                        }
                    }
                });
            
                $("#upgradeHistoryPopup").dialog({
                    autoOpen:false,
                    height: 600,
                    width: 700,
                    modal: true,
                    buttons:{
                        'Ok': function() {
                            $(this).dialog('close');
            
                        }
                    }
                });

                  $("#issueHistoryPopup").dialog({
                    autoOpen:false,
                    height: 600,
                    width: 700,
                    modal: true,
                    buttons:{
                        'Ok': function() {
                            $(this).dialog('close');

                        }
                    }
                });

            
                $("#reportIssue").click(function(event)
                {
                    //Stop any default actions on the button.
                    event.preventDefault();
                    //Open your dialog.
                    $("#reportIssueDialog").dialog("open");
            
                });

               $("#issueHistoryLink").click(function(event){

                    Hwdrepo.loadIssueHistory(deviceID[1]);






                    //Stop any default actions on the button.
                    event.preventDefault();
                    //Open your dialog.
                    $("#issueHistoryPopup").dialog("open");
                });
            
                $("#hardwareTypeSelect").change(function() {
            
                    var selectedText=$("#hardwareTypeSelect :selected").text();
            
                    //empty the dropdown
                    $("#hardwareSelect").empty();
            
                    //send the post for processing
                    $.post("test3.jag",{selectedTxt:selectedText},function(data,status){
                        var parsed=JSON.parse(data);
                        var option="";
            
                        //add all the available options
                        for(var key in parsed){
                            option="<option value='"+key+"'>"+parsed[key]+"</option>";
                            $("#hardwareSelect").append(option);
                        }
                    });
                });


                $("#upgradeHistoryLink").click(function(event){

                    Hwdrepo.loadUpgradeHistory(deviceID);






                    //Stop any default actions on the button.
                    event.preventDefault();
                    //Open your dialog.
                    $("#upgradeHistoryPopup").dialog("open");
                });
            });

            function readURL(){

                   // var issueHistory=document.getElementById("issueHistoryLink");
                  //  issueHistory.setAttribute("href","normal_device_issues.jag?id="+deviceID[1]);

                   Hwdrepo.getDeviceDetails(deviceID);
                }

             function getAccessories(){

                Hwdrepo.getAccssories(deviceID);


             }
            
            function prepareList() {
                $('#expList').find('li:has(ul)')
                        .click( function(event) {
                            if (this == event.target) {
                                $(this).toggleClass('expanded');
                                $(this).children('ul').toggle('medium');
                            }
                            return false;
                        })
                        .addClass('collapsed')
                        .children('ul').hide();
            }
            
            
            
            
            
            
            
            
        </script>
    </head>
    <body>
        <noscript>
            &lt;div class="something-wrong"&gt;
            &lt;div class="title"&gt;JavaScript is disabled on your browser&lt;/div&gt;
            &lt;div class="content"&gt;Please enable JavaScript or upgrade to a JavaScript-capable browser to use WSO2 Products.&lt;/div&gt;
            &lt;/div&gt;
        </noscript>
        <!--[if lte IE 6]>
        <div class="something-wrong">
            <div class="title">Did you know that your Internet Explorer is out of date?</div>
            <div class="content">To get the best possible experience using our website we recommend that you upgrade to a newer
                version.
            </div>
        </div>
        <![endif]-->
        <div id="dcontainer"></div>
        <script type="text/javascript" src="./page2_files/dialog.js"></script>
        <!-- JS imports for collapsible menu -->
        <script src="js/yahoo-dom-event.js" type="text/javascript"></script>
        <script src="js/animation-min.js" type="text/javascript"></script>
        <script src="js/template.js" type="text/javascript"></script>
        <script src="js/yahoo-min.js" type="text/javascript"></script>
        <script src="js/selector-min.js" type="text/javascript"></script>
        <table id="main-table" border="0" cellspacing="0">
            <tbody>
                <tr>
                    <td id="header" colspan="3">
                        <!--[IF IE 7]>
                        <style>
                            div#header-div div.right-links {
                            position: absolute;
                            }
                        </style>
                        <![endif]-->
                        <div id="header-div">
                            <div class="right-logo">WSO2 Hardware Repository</div>
                            <div class="left-logo"></div>
                            <!--<div class="middle-ad"></div>-->
                            <div class="header-links">
                                <div class="right-links">
                                    <ul>
                                        <li class="middle">
                                            <label id="logged-user">
                                            <strong>Signed-in as:</strong>&nbsp;admin@carbon.super
                                            </label>
                                        </li>
                                        <li class="middle">|</li>
                                        <li class="right">
                                            <a href="https://localhost:9443/carbon/admin/logout_action.jsp">Sign-out</a>
                                        </li>
                                        <li class="middle">|</li>
                                        <li class="left">
                                            <a target="_blank" href="https://localhost:9443/carbon/docs/about.html">About</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td id="menu-panel" valign="top">
                        <div id='mainMenu'>
                            <ul>
                                <li><a href='admin_home.jag'><span>Home</span></a></li>
                                <li><a href='admin_requests.jag'><span>Requests</span></a></li>
                                <li class='last'><a href='#'><span>Report Generation</span></a></li>
                            </ul>
                        </div>
                    </td>
                    <td id="middle-content">
                        <table id="content-table" border="0" cellspacing="0">
                            <tbody>
                                <tr>
                                    <td id="page-header-links">
                                        <table class="page-header-links-table" cellspacing="0">
                                            <tbody>
                                                <tr>
                                                    <td class="breadcrumbs">
                                                        <table class="breadcrumb-table" cellspacing="0">
                                                            <tbody>
                                                                <tr>
                                                                    <td>
                                                                        <div id="breadcrumb-div"></div>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                    <td class="page-header-help"><a
                                                        href="https://localhost:9443/carbon/sequences/docs/userguide.html" target="_blank">Help</a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                                <tr>
                                    <td id="body">
                                        <img src="./page2_files/1px.gif" width="735px" height="1px">
                                    </td>
                                </tr>
                                <!--This is edited for device details grid implementation -->
                                <tr>
                                    <td>
                                        <div id="deviceMainContainer" class="main_container">
                                            <div id="listContainer">
                                                <ul id="expList">
                                                    <li>
                                                        <h2><span style="color: #00346e">Basic Features</span></h2>
                                                        <!-- Get the data from DB and show here -->
                                                        <ul>
                                                            </br>
                                                            <li>
                                                                <div id="basicDetailsDiv">
                                                                    <table id="basicFeaturesTbl">
                                                                        <thead>
                                                                            <tr style="height: 25px">
                                                                                <th colspan="2"></th>
                                                                            </tr>
                                                                        </thead>
                                                                    </table>
                                                                </div>
                                                                <div id="linksDiv">
                                                                <table>
                                                                <br/><br/><a href="#" id="upgradeHistoryLink">Upgrade History</a><a href="#" id="issueHistoryLink" style="margin-left: 150px;">Issue History</a><br><br/><a href="#">Warranty Details</a>
                                                                    <button id="reportIssue" class="siteButton" style="margin-left: 150px;">Report Issue</button>

                                                                    </table>
                                                                    </div>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    </br>
                                                    <hr/>
                                                    </br>
                                                    <li>
                                                        <h2><span style="color: #00346e">Accessories</span></h2>
                                                        <!-- Get the data from DB and show here -->
                                                        <ul>
                                                            </br>
                                                            <li>
                                                                <div id="accessoryDiv">
                                                                </div>
                                                            </li>

                                                        </ul>
                                                    </li>
                                                    </br>
                                                    <hr/>
                                                    </br>
                                                </ul>
                                            </div>
                                            <div id="reportIssueDialog">
                                                <form>
                                                    <table style="width: 500px;margin: auto;" cellspacing="25px">
                                                        <tr>
                                                            <td><label id="selectIssueType">Select Issue Type</label></td>
                                                            <td>
                                                                <select id="issueTypeSelect" class="siteButton">
                                                                    <option id="option1" selected value="0">--Select Issue Urgency--</option>
                                                                    <option id="option2" value="op1">Critical</option>
                                                                    <option id="option3" value="op2">Normal</option>
                                                                    <option id="option4" value="op3">If Possible</option>
                                                                </select>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td><p>Date: </p></td>
                                                            <td><input type="text" id="datepicker" class="inputField" ></td>
                                                        <!--    <td>
                                                                <select id="issueCatSelect" class="siteButton">
                                                                    <option id="option11" value="0">--Select Issue Type--</option>
                                                                     <option id="option12" value="1"> Malfunction</option>
                                                                </select>
                                                            </td> -->
                                                        </tr>
                                                        <tr>
                                                            <td colspan="2">
                                                                <label id="componentDetailsLbl">Hardware Component Description</label><br/><br/>
                                                                <div id="componentDetailsArea" style="border-color: #0099ff;width: 450px;height: 100px;border: 2px solid" class="textArea">

                                                            </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="2">
                                                                <label id="issueDescriptionLbl">Add Issue Description</label><br/><br/>
                                                                <textarea rows="8" cols="54" id="issueDescription" class="textArea"></textarea>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <span class="hidden" id="addHdwErr"></span>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </form>
                                            </div>
                                        </div>
                                        <div id="upgradeHistoryPopup">
                                            <h2 style="text-align: center;color: #ffffff;background-color: #005580;margin: 25px auto 25px auto;width: 400px;">Upgrade History for The Device</h2>
                                        </div>
                                        <div id="issueHistoryPopup" class="main_container">
                                            <h2 style="text-align: center;color: #ffffff;background-color: #005580;margin: 25px auto 25px auto;width: 400px;">Reported Issues</h2>

                                            <div id="deviceIssuesDevision">
                                            </div>
                                        </div>
                                        </div>
                                    </td>
                                </tr>
                                <!-- End of devices grid generation -->
                            </tbody>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td id="footer" colspan="3">
                        <div id="footer-div">
                            <div class="footer-content">
                                <div class="copyright">
                                    © 2005 - 2013 WSO2 Inc. All Rights Reserved.
                                </div>
                                <!--div class="poweredby">
                                    </div-->
                            </div>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <script type="text/javascript">
            if (Function('/*@cc_on return document.documentMode===10@*/')()) {
                document.documentElement.className += ' ie10';
            }
        </script>
    </body>
</html>